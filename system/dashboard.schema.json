{
  "$schema": "http://json-schema.org/draft-07/schema",
  
  "title": "Dashboard Schema",
  "description": "A schema to validate dashboard configurations",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Name of the dashboard file"
    },
    "title": {
      "type": "string",
      "description": "Title of the dashboard"
    },
    "version": {
      "type": "integer",
      "description": "Version of the dashboard"
    },
    "releaseDate": {
      "type": "string",
      "format": "date-time",
      "description": "Release date of the dashboard"
    },
    "slicers": {
      "type": "array",
      "description": "Array of slicers for filtering data",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the slicer"
          },
          "type": {
            "type": "string",
            "enum": ["select"],
            "description": "Type of the slicer"
          },
          "options": {
            "type": "string",
            "description": "Query to fetch slicer options"
          }
        },
        "required": ["name", "type", "options"]
      }
    },
    "tabs": {
      "type": "array",
      "description": "Array of tabs in the dashboard",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID of the tab"
          },
          "title": {
            "type": "string",
            "description": "Title of the tab"
          },
          "badge": {
            "type": "object",
            "properties": {
              "query": {
                "type": "string",
                "description": "Query to fetch badge data"
              },
              "color": {
                "type": "object",
                "properties": {
                  "high": {
                    "type": "object",
                    "properties": {
                      "upperThreshold": {
                        "type": "string",
                        "description": "Upper threshold for high color"
                      },
                      "lowerThreshold": {
                        "type": "string",
                        "description": "Lower threshold for high color"
                      },
                      "hex": {
                        "type": "string",
                        "description": "Hex color code for high color"
                      }
                    },
                    "required": ["upperThreshold", "lowerThreshold", "hex"]
                  },
                  "medium": {
                    "type": "object",
                    "properties": {
                      "upperThreshold": {
                        "type": "string",
                        "description": "Upper threshold for medium color"
                      },
                      "lowerThreshold": {
                        "type": "string",
                        "description": "Lower threshold for medium color"
                      },
                      "hex": {
                        "type": "string",
                        "description": "Hex color code for medium color"
                      }
                    },
                    "required": ["upperThreshold", "lowerThreshold", "hex"]
                  },
                  "low": {
                    "type": "object",
                    "properties": {
                      "upperThreshold": {
                        "type": "string",
                        "description": "Upper threshold for low color"
                      },
                      "lowerThreshold": {
                        "type": "string",
                        "description": "Lower threshold for low color"
                      },
                      "hex": {
                        "type": "string",
                        "description": "Hex color code for low color"
                      }
                    },
                    "required": ["upperThreshold", "lowerThreshold", "hex"]
                  }
                },
                "required": ["high", "medium", "low"]
              }
            },
            "required": ["query", "color"]
          },
          "tiles": {
            "type": "array",
            "description": "Array of tiles in the tab",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "description": "ID of the tile"
                },
                "label": {
                  "type": "string",
                  "description": "Label of the tile"
                },
                "format": {
                  "type": "string",
                  "description": "Format of the data displayed in the tile"
                },
                "query": {
                  "type": "string",
                  "description": "Query to fetch tile data"
                },
                "totalCounter": {
                  "type": "string",
                  "description": "Total counter identifier for the tile"
                },
                "icon": {
                  "type": "string",
                  "description": "Icon path for the tile"
                }
              },
              "required": ["id", "label", "format", "query", "icon"]
            }
          },
          "visuals": {
            "type": "array",
            "description": "Array of visuals in the tab",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer",
                  "description": "ID of the visual"
                },
                "groupBy": {
                  "type": "string",
                  "description": "Group by field for the visual",
                  "default": null
                },
                "col": {
                  "type": "integer",
                  "description": "Column span of the visual"
                },
                "label": {
                  "type": "string",
                  "description": "Label of the visual"
                },
                "title": {
                  "type": "string",
                  "description": "Title of the visual"
                },
                "type": {
                  "type": "string",
                  "enum": ["bar", "pie", "table"],
                  "description": "Type of the visual"
                },
                "y": {
                  "type": "object",
                  "properties": {
                    "label": {
                      "type": "string",
                      "description": "Y-axis label"
                    },
                    "column": {
                      "type": "string",
                      "description": "Y-axis column"
                    },
                    "format": {
                      "type": "string",
                      "description": "Format of the Y-axis data"
                    },
                    "action": {
                      "type": "string",
                      "description": "Action to perform on the Y-axis data"
                    }
                  },
                  "required": ["label", "column", "format", "action"]
                },
                "x": {
                  "type": "object",
                  "properties": {
                    "label": {
                      "type": "string",
                      "description": "X-axis label"
                    },
                    "column": {
                      "type": "string",
                      "description": "X-axis column"
                    },
                    "format": {
                      "type": "string",
                      "description": "Format of the X-axis data"
                    }
                  },
                  "required": ["label", "column", "format"]
                },
                "query": {
                  "type": "string",
                  "description": "Query to fetch visual data"
                },
                "sortable": {
                  "type": "boolean",
                  "description": "Flag to indicate if the table is sortable",
                  "default": false
                },
                "columns": {
                  "type": "object",
                  "description": "Columns configuration for table visual",
                  "additionalProperties": {
                    "type": "object",
                    "properties": {
                      "label": {
                        "type": "string",
                        "description": "Column label"
                      },
                      "column": {
                        "type": "string",
                        "description": "Column field"
                      },
                      "format": {
                        "type": "string",
                        "description": "Column data format"
                      },
                      "sort": {
                        "type": "integer",
                        "description": "Sort order of the column"
                      }
                    },
                    "required": ["label", "column", "format"]
                  }
                }
              },
              "required": ["id", "col", "label", "title", "type", "query"]
            }
          }
        },
        "required": ["id", "title", "badge", "tiles", "visuals"]
      }
    }
  },
  "required": ["name", "title", "version", "releaseDate", "slicers", "tabs"]
}
